# 📄 گزارش پروژه: اپلیکیشن خلاصه‌ساز صوت فارسی

### 👤 توسعه‌دهنده: [نام شما]  
### 📅 تاریخ: [تاریخ روز]  
### 🛠️ فناوری‌های استفاده‌شده:  
- **رابط کاربری**: Streamlit (پایتون)  
- **پردازش زبان طبیعی**: OpenAI GPT-4o برای تبدیل گفتار به متن، GPT-4.1 برای خلاصه‌سازی  
- **پردازش صدا**: کتابخانه pydub  
- **مدیریت فایل موقت و لاگ‌ها**: tempfile، os، shutil  

---

## 🎯 هدف پروژه
توسعه‌ی یک اپلیکیشن تحت وب با رابط کاربری ساده و پشتیبانی کامل از زبان فارسی که قابلیت‌های زیر را در اختیار کاربر قرار می‌دهد:

1. آپلود فایل صوتی فارسی (فرمت‌های MP3، WAV، M4A)  
2. تبدیل فایل صوتی به متن با استفاده از API مدل gpt-4o-transcribe  
3. خلاصه‌سازی خودکار متن استخراج‌شده با استفاده از GPT-4.1 و پرامپت اختصاصی  
4. ذخیره لاگ هر عملیات جهت بررسی و پیگیری بعدی  

---

## 🔍 توضیح عملکرد توابع اصلی

### `local_font(path)`
بارگذاری فونت سفارشی فارسی از فایل محلی و اعمال تنظیمات راست‌چین (RTL) و فونت در کل رابط کاربری.

### `format_time(ms)`
تبدیل زمان برحسب میلی‌ثانیه به فرمت قابل‌خواندن `HH:MM:SS`.

### `split_audio(audio, chunk_duration_ms)`
تقسیم فایل‌های صوتی طولانی به بخش‌های کوچکتر (مثلاً هر ۲ دقیقه) برای تسهیل پردازش در API.

### `transcribe_audio_via_api(audio_path, prompt, index=None)`
ارسال بخش صوتی به API مدل OpenAI برای تبدیل گفتار فارسی به متن، با امکان ارائه پرامپت جهت تشخیص بهتر اسامی.

### `show_logs_ui()`
نمایش تاریخچه‌ی لاگ‌ها در نوار کناری رابط کاربری. شامل فایل‌های اصلی، متن استخراج‌شده، پرامپت‌ها و خلاصه‌ها به‌همراه امکان دانلود هر فایل.

### `summarize_text(transcript, gpt_prompt)`
ارسال متن کامل استخراج‌شده به مدل GPT-4.1 با پرامپت سفارشی جهت تولید خلاصه‌ای ساختارمند و کاربردی.

### `save_request_log(...)`
ایجاد پوشه‌ای با زمان‌سنج برای هر پردازش و ذخیره تمامی اطلاعات مربوط به آن شامل:  
- فایل اصلی صوتی  
- پرامپت تبدیل گفتار  
- متن استخراج‌شده  
- پرامپت خلاصه‌سازی  
- خلاصه نهایی  
- اطلاعات تکمیلی مانند هزینه و زمان پردازش  

### `main()`
تابع اصلی برای مدیریت روند کلی:
- دریافت فایل صوتی از کاربر  
- گرفتن ورودی پرامپت‌ها  
- پردازش فایل صوتی  
- تبدیل صوت به متن  
- خلاصه‌سازی  
- نمایش و امکان دانلود متن و خلاصه  
- ذخیره لاگ و پاک‌سازی فایل‌های موقت  

---

## ✅ ویژگی‌های کلیدی برنامه

- پشتیبانی کامل از زبان فارسی (راست‌چین، فونت فارسی، پردازش صوت فارسی)
- پرامپت‌های قابل تنظیم توسط کاربر برای افزایش دقت در تشخیص و خلاصه‌سازی
- تقسیم خودکار فایل‌های صوتی بزرگ
- برآورد هزینه پردازش (براساس دقیقه × $0.006)
- ذخیره‌سازی و دسترسی به لاگ‌ها برای استفاده‌های بعدی
- رابط کاربری ساده و کاربرپسند

---

## 🚀 پیشنهادات برای توسعه آینده

- اضافه‌کردن ورود کاربران و احراز هویت  
- قابلیت دریافت صدا از میکروفون  
- قابلیت ویرایش لاگ‌ها از داخل برنامه  
- استقرار (Deployment) روی فضای ابری مانند Streamlit Cloud یا Hugging Face Spaces  


##requirements
pip install git+https://github.com/openai/whisper.git
pip install openai
pip install pydub
pip install python-dotenv

On Ubuntu: sudo apt install ffmpeg
On Mac (Homebrew): brew install ffmpeg